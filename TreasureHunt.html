<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁßòÂ¢ÉÂØªË∏™ - ÂØªÂÆù‰ΩìÈ™å</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #3498db;
            --secondary: #2ecc71;
            --accent: #f39c12;
            --dark: #2c3e50;
            --light: #ecf0f1;
            --text: #34495e;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, var(--dark) 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
        }
        
        /* Âú∞ÂõæÂå∫Âüü */
        .map-section {
            padding: 25px;
            background: #f8f9fa;
            border-right: 1px solid #e9ecef;
        }
        
        .section-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .map-container {
            width: 100%;
            height: 400px;
            background: #e9f2fa;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            border: 2px solid #d6e4f0;
        }
        
        .map-grid {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(#d6e4f0 1px, transparent 1px),
                linear-gradient(90deg, #d6e4f0 1px, transparent 1px);
            background-size: 40px 40px;
            opacity: 0.5;
        }
        
        .location {
            position: absolute;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: all 0.3s ease;
            cursor: pointer;
            z-index: 10;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
            border: 3px solid white;
        }
        
        .location:hover {
            transform: scale(1.05);
        }
        
        .location.active {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 20;
        }
        
        .library { top: 15%; left: 20%; background: #e67e22; color: white; }
        .cave { top: 35%; left: 70%; background: #7f8c8d; color: white; }
        .temple { top: 65%; left: 40%; background: #d35400; color: white; }
        .ruins { top: 45%; left: 55%; background: #16a085; color: white; }
        .treasure { top: 75%; left: 25%; background: #f1c40f; color: #2c3e50; }
        
        .path {
            position: absolute;
            height: 4px;
            background: var(--primary);
            border-radius: 2px;
            transform-origin: left center;
            z-index: 5;
            transition: width 0.5s ease;
        }
        
        .character {
            position: absolute;
            width: 24px;
            height: 24px;
            background: var(--primary);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: all 1.5s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            z-index: 15;
            border: 2px solid white;
        }
        
        /* ÊéßÂà∂Âè∞Âå∫Âüü */
        .console-section {
            padding: 25px;
            display: flex;
            flex-direction: column;
        }
        
        .controls {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 20px;
            background: var(--primary);
            border: none;
            border-radius: 6px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        button:disabled {
            background: #bdc3c7;
            color: #7f8c8d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .secondary-btn {
            background: var(--secondary);
        }
        
        .tertiary-btn {
            background: var(--accent);
        }
        
        .progress-container {
            margin-bottom: 20px;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }
        
        .progress-bar {
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 5px;
            width: 0%;
            transition: width 0.8s ease;
        }
        
        .status-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .status-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            border-left: 4px solid var(--primary);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .status-card:nth-child(2) {
            border-left-color: var(--secondary);
        }
        
        .status-card:nth-child(3) {
            border-left-color: var(--accent);
        }
        
        .status-value {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 5px 0;
            color: var(--dark);
        }
        
        .status-label {
            font-size: 0.85rem;
            color: #7f8c8d;
        }
        
        .log-container {
            flex: 1;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            overflow-y: auto;
            border: 1px solid #e9ecef;
            min-height: 200px;
            max-height: 300px;
        }
        
        .log-entry {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 6px;
            background: white;
            animation: fadeIn 0.3s;
            border-left: 4px solid var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }
        
        .log-entry.success { border-left-color: var(--secondary); }
        .log-entry.warning { border-left-color: var(--accent); }
        .log-entry.error { border-left-color: #e74c3c; }
        .log-entry.info { border-left-color: var(--primary); }
        
        /* Âä®ÁîªÊïàÊûú */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 900px) {
            .content {
                grid-template-columns: 1fr;
            }
            
            .map-section {
                border-right: none;
                border-bottom: 1px solid #e9ecef;
            }
        }
        
        @media (max-width: 600px) {
            .controls {
                flex-direction: column;
            }
            
            .status-cards {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ÁßòÂ¢ÉÂØªË∏™</h1>
            <div class="subtitle">ÂºÇÊ≠•ÂØªÂÆùÊé¢Èô©</div>
        </header>
        
        <div class="content">
            <section class="map-section">
                <div class="section-title">
                    <i class="fas fa-map-marked-alt"></i>
                    <span>Êé¢Èô©Âú∞Âõæ</span>
                </div>
                <div class="map-container">
                    <div class="map-grid"></div>
                    <div class="path" id="path1"></div>
                    <div class="path" id="path2"></div>
                    <div class="path" id="path3"></div>
                    <div class="path" id="path4"></div>
                    
                    <div class="location library"><i class="fas fa-book"></i></div>
                    <div class="location cave"><i class="fas fa-mountain"></i></div>
                    <div class="location temple"><i class="fas fa-place-of-worship"></i></div>
                    <div class="location ruins"><i class="fas fa-monument"></i></div>
                    <div class="location treasure"><i class="fas fa-gem"></i></div>
                    
                    <div class="character" id="character"></div>
                </div>
            </section>
            
            <section class="console-section">
                <div class="section-title">
                    <i class="fas fa-terminal"></i>
                    <span>ÊéßÂà∂Âè∞</span>
                </div>
                
                <div class="controls">
                    <button id="startBtn"><i class="fas fa-play"></i> ÂºÄÂßãÊé¢Èô©</button>
                    <button id="pauseBtn" class="secondary-btn" disabled><i class="fas fa-pause"></i> ÊöÇÂÅú</button>
                    <button id="resetBtn" class="tertiary-btn"><i class="fas fa-redo"></i> ÈáçÁΩÆ</button>
                </div>
                
                <div class="progress-container">
                    <div class="progress-label">
                        <span>Êé¢Èô©ËøõÂ∫¶</span>
                        <span id="progressPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
                
                <div class="status-cards">
                    <div class="status-card">
                        <div class="status-label">ÂΩìÂâçÊ≠•È™§</div>
                        <div class="status-value" id="currentStep">0/5</div>
                    </div>
                    <div class="status-card">
                        <div class="status-label">ÂèëÁé∞Á∫øÁ¥¢</div>
                        <div class="status-value" id="cluesFound">0</div>
                    </div>
                    <div class="status-card">
                        <div class="status-label">Êé¢Èô©Êó∂Èó¥</div>
                        <div class="status-value" id="explorationTime">00:00</div>
                    </div>
                </div>
                
                <div class="section-title">
                    <i class="fas fa-scroll"></i>
                    <span>Êé¢Èô©Êó•Âøó</span>
                </div>
                <div class="log-container" id="logContainer">
                    <div class="log-entry info"><i class="fas fa-info-circle"></i> Á≥ªÁªüÂ∞±Áª™ÔºåÁ≠âÂæÖÂºÄÂßãÊé¢Èô©...</div>
                </div>
            </section>
        </div>
    </div>

    <script>
        // Êâ©Â±ïÂÆùËóèÂú∞ÂõæAPI
        class TreasureMap {
            static async getInitialClue() {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        resolve("Âú®Âè§ËÄÅÁöÑÂõæ‰π¶È¶ÜÈáåÊâæÂà∞‰∫ÜÁ¨¨‰∏Ä‰∏™Á∫øÁ¥¢Ôºö‰∏ÄÂº†Ê≥õÈªÑÁöÑÂú∞ÂõæÔºåÊåáÂêë‰∏Ä‰∏™Á•ûÁßòÊ¥ûÁ©¥...");
                    }, 1500);
                });
            }

            static async exploreMysteriousCave(clue) {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        if (!clue) {
                            reject("Ê≤°ÊúâÁ∫øÁ¥¢ÔºåÊó†Ê≥ïÊé¢Á¥¢Ê¥ûÁ©¥!");
                        }
                        // 30%Âá†ÁéáÈÅáÂà∞Âç±Èô©
                        if (Math.random() < 0.3) {
                            reject("Ê¥ûÁ©¥Êé¢Èô©Â§±Ë¥•! ÈÅáÂà∞‰∫ÜËêΩÁü≥Èô∑Èò±!");
                        }
                        resolve("ÊàêÂäüÊé¢Á¥¢Ê¥ûÁ©¥! ÂèëÁé∞‰∫Ü‰∏ÄÁªÑÂè§ËÄÅÁöÑÁ¨¶Êñá...");
                    }, 2000);
                });
            }

            static async decodeAncientScript(script) {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        if (!script) {
                            reject("Ê≤°ÊúâÁ¨¶ÊñáÂèØ‰ª•Ëß£Á†Å!");
                        }
                        resolve("Ëß£Á†ÅÊàêÂäü! Á¨¶ÊñáÊåáÂêë‰∏ÄÂ∫ßË¢´ÈÅóÂøòÁöÑÁ•ûÂ∫ô...");
                    }, 1800);
                });
            }

            static async searchTemple(location) {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        const random = Math.random();
                        if (random < 0.4) {
                            reject("Á≥üÁ≥ï!ÈÅáÂà∞‰∫ÜÁ•ûÂ∫ôÂÆàÊä§ËÄÖ! ÈúÄË¶ÅÊÉ≥ÂäûÊ≥ïÁªïËøáÂÆÉ...");
                        }
                        resolve("Âú®Á•ûÂ∫ôÊ∑±Â§ÑÊâæÂà∞‰∫Ü‰∏Ä‰∏™Á•ûÁßòÁöÑÁÆ±Â≠êÔºå‰ΩÜÈúÄË¶ÅËß£ÂºÄË∞úÈ¢òÊâçËÉΩÊâìÂºÄ...");
                    }, 2200);
                });
            }

            static async solvePuzzle(box) {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        if (!box) {
                            reject("Ê≤°ÊúâÊâæÂà∞ÁÆ±Â≠êÔºåÊó†Ê≥ïËß£Ë∞ú!");
                        }
                        // 20%Âá†ÁéáËß£Ë∞úÂ§±Ë¥•
                        if (Math.random() < 0.2) {
                            reject("Ë∞úÈ¢òÂ§™Èöæ‰∫Ü! ÈúÄË¶ÅÊõ¥Â§öÊó∂Èó¥ÊÄùËÄÉ...");
                        }
                        resolve("ÊàêÂäüËß£ÂºÄË∞úÈ¢ò! ÁÆ±Â≠êÊâìÂºÄ‰∫ÜÔºåÈáåÈù¢ÊòØ...");
                    }, 2500);
                });
            }

            static async openTreasureBox() {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        resolve("ÊÅ≠Âñú!‰Ω†ÊâæÂà∞‰∫Ü‰º†ËØ¥‰∏≠ÁöÑÂÆùËóè - ‰∏ÄÈ¢óÂèëÂÖâÁöÑÈ≠îÊ≥ïÂÆùÁü≥!");
                    }, 1500);
                });
            }
        }

        // Ê∏∏ÊàèÁä∂ÊÄÅÁÆ°ÁêÜ
        class TreasureGame {
            constructor() {
                this.stepCount = 0;
                this.totalSteps = 5;
                this.isPlaying = false;
                this.isPaused = false;
                this.startTime = null;
                this.timerInterval = null;
                
                this.locations = document.querySelectorAll('.location');
                this.character = document.getElementById('character');
                this.logContainer = document.getElementById('logContainer');
                this.currentStepElement = document.getElementById('currentStep');
                this.cluesFoundElement = document.getElementById('cluesFound');
                this.explorationTimeElement = document.getElementById('explorationTime');
                this.progressFill = document.getElementById('progressFill');
                this.progressPercent = document.getElementById('progressPercent');
                
                this.startBtn = document.getElementById('startBtn');
                this.pauseBtn = document.getElementById('pauseBtn');
                this.resetBtn = document.getElementById('resetBtn');
                
                this.setupEventListeners();
                this.resetGame();
            }
            
            setupEventListeners() {
                this.startBtn.addEventListener('click', () => this.startAdventure());
                this.pauseBtn.addEventListener('click', () => this.togglePause());
                this.resetBtn.addEventListener('click', () => this.resetGame());
            }
            
            resetGame() {
                this.stepCount = 0;
                this.isPlaying = false;
                this.isPaused = false;
                this.updateStepCounter();
                this.updateProgressBar();
                this.logContainer.innerHTML = '<div class="log-entry info"><i class="fas fa-info-circle"></i> Á≥ªÁªüÂ∞±Áª™ÔºåÁ≠âÂæÖÂºÄÂßãÊé¢Èô©...</div>';
                this.character.style.top = '50%';
                this.character.style.left = '50%';
                this.cluesFoundElement.textContent = '0';
                this.explorationTimeElement.textContent = '00:00';
                
                this.locations.forEach(loc => loc.classList.remove('active'));
                this.startBtn.disabled = false;
                this.pauseBtn.disabled = true;
                this.pauseBtn.innerHTML = '<i class="fas fa-pause"></i> ÊöÇÂÅú';
                
                // ÈáçÁΩÆË∑ØÂæÑ
                document.querySelectorAll('.path').forEach(path => {
                    path.style.width = '0';
                });
                
                clearInterval(this.timerInterval);
                this.addLog("Ê∏∏ÊàèÂ∑≤ÈáçÁΩÆÔºåÂáÜÂ§áÂºÄÂßãÊñ∞ÁöÑÂÜíÈô©!", "info");
            }
            
            startAdventure() {
                if (this.isPlaying) return;
                
                this.isPlaying = true;
                this.startBtn.disabled = true;
                this.pauseBtn.disabled = false;
                this.startTime = new Date();
                
                this.startTimer();
                this.addLog("üöÄ ÂØªÂÆùÂÜíÈô©ÂºÄÂßã!", "info");
                
                this.executeAdventure();
            }
            
            async executeAdventure() {
                try {
                    // Á¨¨‰∏ÄÊ≠•ÔºöËé∑ÂèñÂàùÂßãÁ∫øÁ¥¢
                    await this.moveToLocation(0); // Âõæ‰π¶È¶Ü
                    const clue = await TreasureMap.getInitialClue();
                    this.addLog(clue, "success");
                    this.updateStepCounter(1);
                    
                    // Á¨¨‰∫åÊ≠•ÔºöÊé¢Á¥¢Á•ûÁßòÊ¥ûÁ©¥
                    await this.moveToLocation(1); // Ê¥ûÁ©¥
                    const caveResult = await TreasureMap.exploreMysteriousCave(clue);
                    this.addLog(caveResult, "success");
                    this.updateStepCounter(2);
                    
                    // Á¨¨‰∏âÊ≠•ÔºöËß£Á†ÅÂè§ËÄÅÁ¨¶Êñá
                    await this.moveToLocation(3); // Â∫üÂ¢ü
                    const decoded = await TreasureMap.decodeAncientScript(caveResult);
                    this.addLog(decoded, "success");
                    this.updateStepCounter(3);
                    
                    // Á¨¨ÂõõÊ≠•ÔºöÊêúÁ¥¢Á•ûÂ∫ô
                    await this.moveToLocation(2); // Á•ûÂ∫ô
                    const templeResult = await TreasureMap.searchTemple(decoded);
                    this.addLog(templeResult, "success");
                    this.updateStepCounter(4);
                    
                    // Á¨¨‰∫îÊ≠•ÔºöËß£ÂºÄË∞úÈ¢ò
                    const puzzleResult = await TreasureMap.solvePuzzle(templeResult);
                    this.addLog(puzzleResult, "success");
                    this.updateStepCounter(5);
                    
                    // ÊúÄÂêéÔºöÊâìÂºÄÂÆùËóè
                    await this.moveToLocation(4); // ÂÆùËóè
                    const treasure = await TreasureMap.openTreasureBox();
                    this.addLog(treasure, "success");
                    
                    // ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ
                    this.addLog("üéâ ÊÅ≠Âñú‰Ω†ÊàêÂäüÊâæÂà∞ÂÆùËóè! üéâ", "success");
                    this.celebrate();
                    
                } catch (error) {
                    this.addLog(`‰ªªÂä°Â§±Ë¥•: ${error}`, "error");
                    this.addLog("ÂÜíÈô©‰∏≠Êñ≠‰∫ÜÔºåÁÇπÂáªÈáçÁΩÆÊåâÈíÆÂÜçËØï‰∏ÄÊ¨°!", "warning");
                } finally {
                    this.pauseBtn.disabled = true;
                }
            }
            
            async moveToLocation(locationIndex) {
                if (this.isPaused) {
                    await this.waitForResume();
                }
                
                const targetLocation = this.locations[locationIndex];
                const rect = targetLocation.getBoundingClientRect();
                const mapRect = document.querySelector('.map-container').getBoundingClientRect();
                
                // ËÆ°ÁÆóÁõÆÊ†á‰ΩçÁΩÆÔºàÁõ∏ÂØπ‰∫éÂú∞ÂõæÂÆπÂô®Ôºâ
                const top = rect.top - mapRect.top + rect.height / 2;
                const left = rect.left - mapRect.left + rect.width / 2;
                
                // ÊøÄÊ¥ªÁõÆÊ†áÂú∞ÁÇπ
                this.locations.forEach(loc => loc.classList.remove('active'));
                targetLocation.classList.add('active');
                
                // ÁªòÂà∂Ë∑ØÂæÑ
                if (locationIndex > 0) {
                    this.drawPath(locationIndex);
                }
                
                // ÁßªÂä®ËßíËâ≤
                this.character.style.top = `${top}px`;
                this.character.style.left = `${left}px`;
                
                // Á≠âÂæÖÁßªÂä®Âä®ÁîªÂÆåÊàê
                return new Promise(resolve => {
                    setTimeout(resolve, 1500);
                });
            }
            
            drawPath(toIndex) {
                const fromIndex = toIndex - 1;
                const fromLoc = this.locations[fromIndex];
                const toLoc = this.locations[toIndex];
                
                const fromRect = fromLoc.getBoundingClientRect();
                const toRect = toLoc.getBoundingClientRect();
                const mapRect = document.querySelector('.map-container').getBoundingClientRect();
                
                const fromX = fromRect.left - mapRect.left + fromRect.width / 2;
                const fromY = fromRect.top - mapRect.top + fromRect.height / 2;
                const toX = toRect.left - mapRect.left + toRect.width / 2;
                const toY = toRect.top - mapRect.top + toRect.height / 2;
                
                // ËÆ°ÁÆóË∑ùÁ¶ªÂíåËßíÂ∫¶
                const distance = Math.sqrt(Math.pow(toX - fromX, 2) + Math.pow(toY - fromY, 2));
                const angle = Math.atan2(toY - fromY, toX - fromX) * 180 / Math.PI;
                
                // Ëé∑ÂèñË∑ØÂæÑÂÖÉÁ¥†
                const path = document.getElementById(`path${toIndex}`);
                path.style.width = `${distance}px`;
                path.style.left = `${fromX}px`;
                path.style.top = `${fromY}px`;
                path.style.transform = `rotate(${angle}deg)`;
            }
            
            togglePause() {
                this.isPaused = !this.isPaused;
                
                if (this.isPaused) {
                    this.pauseBtn.innerHTML = '<i class="fas fa-play"></i> ÁªßÁª≠';
                    this.addLog("Êé¢Èô©Â∑≤ÊöÇÂÅú", "warning");
                } else {
                    this.pauseBtn.innerHTML = '<i class="fas fa-pause"></i> ÊöÇÂÅú';
                    this.addLog("Êé¢Èô©ÁªßÁª≠", "info");
                }
            }
            
            waitForResume() {
                return new Promise(resolve => {
                    const checkResume = setInterval(() => {
                        if (!this.isPaused) {
                            clearInterval(checkResume);
                            resolve();
                        }
                    }, 100);
                });
            }
            
            startTimer() {
                this.timerInterval = setInterval(() => {
                    if (!this.isPaused && this.startTime) {
                        const now = new Date();
                        const diff = Math.floor((now - this.startTime) / 1000);
                        const minutes = Math.floor(diff / 60).toString().padStart(2, '0');
                        const seconds = (diff % 60).toString().padStart(2, '0');
                        this.explorationTimeElement.textContent = `${minutes}:${seconds}`;
                    }
                }, 1000);
            }
            
            addLog(message, type) {
                const icons = {
                    success: 'check-circle',
                    warning: 'exclamation-triangle',
                    error: 'times-circle',
                    info: 'info-circle'
                };
                
                const logEntry = document.createElement('div');
                logEntry.className = `log-entry ${type}`;
                logEntry.innerHTML = `<i class="fas fa-${icons[type]}"></i> [${new Date().toLocaleTimeString()}] ${message}`;
                this.logContainer.appendChild(logEntry);
                this.logContainer.scrollTop = this.logContainer.scrollHeight;
                
                // Êõ¥Êñ∞Á∫øÁ¥¢ËÆ°Êï∞
                if (type === 'success' && message.includes('Á∫øÁ¥¢') || message.includes('ÂèëÁé∞')) {
                    this.cluesFoundElement.textContent = parseInt(this.cluesFoundElement.textContent) + 1;
                }
            }
            
            updateStepCounter(step) {
                if (step) {
                    this.stepCount = step;
                }
                this.currentStepElement.textContent = `${this.stepCount}/${this.totalSteps}`;
                this.updateProgressBar();
            }
            
            updateProgressBar() {
                const percent = (this.stepCount / this.totalSteps) * 100;
                this.progressFill.style.width = `${percent}%`;
                this.progressPercent.textContent = `${Math.round(percent)}%`;
            }
            
            celebrate() {
                // ÁÆÄÂçïÁöÑÂ∫ÜÁ•ùÊïàÊûú - ‰ΩøÂÆùËóè‰ΩçÁΩÆËÑâÂä®
                const treasure = document.querySelector('.treasure');
                treasure.classList.add('pulse');
                
                // Ê∑ªÂä†ÊàêÂäüÊó•Âøó
                setTimeout(() => {
                    this.addLog("Êé¢Èô©ÂÆåÊàê! ‰Ω†ÊòØ‰∏Ä‰ΩçÂá∫Ëâ≤ÁöÑÂÆùËóèÁåé‰∫∫!", "success");
                }, 1000);
            }
        }

        // ÂàùÂßãÂåñÊ∏∏Êàè
        document.addEventListener('DOMContentLoaded', () => {
            new TreasureGame();
        });
    </script>
</body>
</html>